<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ticket ‚Äì Caf√© Motivation GO'UP</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

<style>
:root{
  --orange:#e06a16;
  --orange-light:#f18c42;
  --orange-dark:#c55a12;
  --bleu:#1a1a26;
  --bleu-light:#2a2a3a;
}

body{
  background:linear-gradient(135deg,var(--bleu),var(--orange-dark));
  min-height:100vh;
  display:flex;
  align-items:center;
}

.ticket-card{
  max-width:420px;
  margin:auto;
  border-radius:20px;
  overflow:hidden;
  background:#fff;
}

.ticket-header{
  background:linear-gradient(135deg,var(--bleu),var(--bleu-light));
  color:#fff;
  padding:25px;
  text-align:center;
}

.ticket-header img{
  height:60px;
  margin-bottom:10px;
}

.ticket-body{
  padding:25px;
}

.ticket-row{
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
  font-size:15px;
}

.ticket-number{
  background:var(--bleu);
  color:#fff;
  text-align:center;
  padding:12px;
  border-radius:10px;
  font-weight:700;
  letter-spacing:2px;
  margin:15px 0;
}

.wave-btn{
  background:#1dcf5c;
  color:#fff;
  font-weight:600;
  border-radius:12px;
}
.wave-btn:hover{background:#17b54f;}

.ticket-footer{
  border-top:1px dashed #ddd;
  padding:20px;
  text-align:center;
}

@media print{
  body{background:#fff;}
}
</style>
</head>

<body>

<div class="ticket-card shadow-lg">

  <!-- HEADER -->
  <div class="ticket-header">
    <img src="assets/images/logo.png" alt="GO'UP">
    <h5 class="mb-0">Caf√© Motivation</h5>
    <small>De l‚Äôid√©e √† l‚Äôimpact ‚òïüî•</small>
  </div>

  <!-- BODY -->
  <div class="ticket-body" id="ticket-info"></div>

  <!-- FOOTER -->
  <div class="ticket-footer">

    <a id="waveLink" class="btn wave-btn w-100 mb-3" target="_blank">
      <i class="fas fa-wallet me-2"></i> Payer avec Wave
    </a>

    <canvas id="waveQR" class="mb-3"></canvas>

    <div class="d-grid gap-2">
      <button class="btn btn-outline-secondary" onclick="window.print()">
        <i class="fas fa-print me-1"></i> Imprimer
      </button>
    </div>

  </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

<script>
$(function(){

  const ticket = JSON.parse(localStorage.getItem("lastTicket"));
  const waveUrl = "https://pay.wave.com/m/M_sn_mw86fQUtQu1n/c/sn/";

  if(!ticket){
    $("#ticket-info").html("<p class='text-danger text-center'>Aucun ticket trouv√©</p>");
    return;
  }

  const typeLabels = { DOSE: "Dose", VIP: "VIP", VVIP: "VVIP", SOFT_SKILLS: "Formation Soft Skills (13 f√©v. + Caf√© 14 f√©v.)" };
  const typeLabel = typeLabels[ticket.type_ticket] || ticket.type_ticket;

  $("#ticket-info").html(`
    <div class="ticket-row"><span>Nom</span><strong>${ticket.nom}</strong></div>
    <div class="ticket-row"><span>T√©l√©phone</span><strong>${ticket.tel}</strong></div>
    <div class="ticket-row"><span>Ticket</span><strong>${typeLabel}</strong></div>
    <div class="ticket-row"><span>Quantit√©</span><strong>${ticket.quantite}</strong></div>
    <div class="ticket-row"><span>Total</span><strong>${ticket.total} FCFA</strong></div>

    <div class="ticket-number">
      ${ticket.numero_ticket}
    </div>
  `);

  $("#waveLink").attr("href", waveUrl);

  new QRious({
    element: document.getElementById("waveQR"),
    value: waveUrl,
    size:140
  });

});
</script>

</body>
</html>
